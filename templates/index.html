{% extends "base.html" %}

{% block content %}

{% if logged_in %}
<h2>
    What's on your mind?

    <a id="profile-button" href="/user/profile">Profile</a>
</h2>

<div id="createpost-container">
    <form action="/post/create" method="POST">
        <input type="hidden" name="csrf-token" value="{{ csrf_token }}">
        <textarea name="content" placeholder="What's happening?"></textarea>
        <input id="createpost-button" type="submit" value="Post">
    </form>
</div>
{% endif %}

<h2>
    Latests Posts
    {% if not logged_in %}<a id="login-button" href="/user/login">Log In</a>{% endif %}
</h2>

{% for post in posts %}
    <div class="post post-clickable">
        <h4>
            <span class="post-name">{{ post.name }}</span>
            <span class="post-username">@{{ post.username }}</span>

            <a href="/post/view/{{ post.post_id }}" class="post-permalink">Permalink</a>
        </h4>

        <div class="post-content">{{ post.content | markdown | safe }}</div>
    </div>
{% else %}
    <div id="noposts">
        No posts yet, but stay tuned!
    </div>
{% endfor %}

{% endblock %}
